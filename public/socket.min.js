!function(){var e={},t={},n={};function r(r,i){return n[r]||(t[r]={exports:{},loaded:!1},n[r]=!0,0===r&&"function"==typeof require?require.main=t[0]:t[r].parent=t[i],e[r].call(this,t[r],t[r].exports),t[r].loaded=!0),t[r].exports}if(e[0]=function(e,t){const n=r(1,0);return window.socket=(e="wss://"+location.host)=>{let t=new n(new WebSocket(e));return t.on("disconnect",(function(n){n&&console.log("qwertyu"),console.log("Reconnecting in 5 secs..."),setTimeout((()=>{t.bind(new WebSocket(e))}),5e3)})),t.on("error",(()=>{t.disconnect()})),t},e.exports},e[1]=function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}return function(){var t={},s={},o={};function u(e,n){return o[e]||(s[e]={exports:{},loaded:!1},o[e]=!0,0===e&&"function"==typeof require?require.main=s[0]:s[e].parent=s[n],t[e].call(this,s[e],s[e].exports),s[e].loaded=!0),s[e].exports}if(t[0]=function(e,t){var n=u(1,0),s=function(e){function t(e,n){i(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r._wrapper=r,"function"==typeof(n=n||{}).debug?r._debug=n.debug:!0===n.debug?r._debug=console.log.bind(console):r._debug=function(){},"function"!=typeof n.errorToJSON?r._errorToJSON=function(e){return"undefined"==typeof window?JSON.stringify({message:e.message}):JSON.stringify(e,Object.getOwnPropertyNames(e))}:r._errorToJSON=n.errorToJSON,n.requestTimeout>0&&(r._requestTimeout=0|n.requestTimeout),r._opened=!1,r._pendingSend=[],r._lastRequestId=0,r._pendingRequests={},r._channels={},r._data={},r._socket=null,e&&e.constructor&&r.bind(e),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"bind",value:function(e){var t=this;if(this._socket){var n=this._socket;n.onopen=n.onmessage=n.onerror=n.onclose=null}return this._socket=e,e.onopen=function(e){t._opened=!0,t._debug("socket: onopen");for(var n=0;n<t._pendingSend.length&&t.isConnected;n++){t._debug("wrapper: Sending pending message:",t._pendingSend[n]);try{t._socket.send(t._pendingSend[n])}catch(e){throw t._pendingSend=t._pendingSend.slice(n-1),e}}t._pendingSend=t._pendingSend.slice(n),t.emit("open",e),t.emit("connect",e)},e.onmessage=function(e){t._debug("socket: onmessage",e.data),t.emit("message",e,e.data),t._onMessage(e.data)},e.onerror=function(e){t._debug("socket: onerror",e),t.emit("error",e)},e.onclose=function(e){var n=t._opened;t._opened=!1,t._debug("socket: onclose",e),t.emit("close",e,n),t.emit("disconnect",e,n)},this.isConnected&&e.onopen(),this}},{key:"abort",value:function(){for(var e in this._pendingRequests)this._pendingRequests[e].reject(new Error("Request was aborted"));return this._pendingRequests={},this._pendingSend=[],this}},{key:"of",value:function(e){return null==e?this:(this._channels[e]||(this._channels[e]=new n(e,this)),this._channels[e])}},{key:"send",value:function(e,n){if(this.isConnected)this._debug("wrapper: Sending message:",e),this._socket.send(e);else{if(!(n||this._pendingSend.length<t.MAX_SEND_QUEUE_SIZE))throw new Error("WebSocket is not connected and send queue is full");this._debug("wrapper: Queuing message:",e),this._pendingSend.push(e)}return this}},{key:"disconnect",value:function(){return this._socket&&this._socket.close.apply(this._socket,arguments),this}},{key:"_onMessage",value:function(e){try{if(!1===(e=JSON.parse(e))["ws-wrapper"])return;if(e.a){var t=[];for(var r in e.a)t[r]=e.a[r];e.a=t}if(e.a instanceof Array&&e.a.length>=1&&(e.c||n.NO_WRAP_EVENTS.indexOf(e.a[0])<0)){var i={name:e.a.shift(),args:e.a,requestId:e.i},s=null==e.c?this:this._channels[e.c];s?s._emitter.emit(i.name,i)?this._debug("wrapper: Event '"+i.name+"' sent to event listener"):(e.i>=0&&this._sendReject(e.i,new Error("No event listener for '"+i.name+"'"+(e.c?" on channel '"+e.c+"'":""))),this._debug("wrapper: Event '"+i.name+"' had no event listener")):(e.i>=0&&this._sendReject(e.i,new Error("Channel '"+e.c+"' does not exist")),this._debug("wrapper: Event '"+i.name+"' ignored because channel '"+e.c+"' does not exist."))}else if(this._pendingRequests[e.i]){if(this._debug("wrapper: Processing response for request",e.i),void 0!==e.e){var o=e.e;if(e._&&o)for(var u in o=new Error(o.message),e.e)o[u]=e.e[u];this._pendingRequests[e.i].reject(o)}else this._pendingRequests[e.i].resolve(e.d);clearTimeout(this._pendingRequests[e.i].timer),delete this._pendingRequests[e.i]}}catch(e){}}},{key:"_sendEvent",value:function(e,t,n,r){var i,s=this,o={a:Array.prototype.slice.call(n)};return null!=e&&(o.c=e),r&&(o.i=++this._lastRequestId,i=new Promise((function(e,t){var n=s._pendingRequests[o.i]={resolve:e,reject:t};s._requestTimeout>0&&(n.timer=setTimeout((function(){t(new Error("Request timed out")),delete s._pendingRequests[o.i]}),s._requestTimeout))}))),this.send(JSON.stringify(o)),i}},{key:"_sendResolve",value:function(e,t){this.send(JSON.stringify({i:e,d:t}),!0)}},{key:"_sendReject",value:function(e,t){var n=t instanceof Error;n&&(t=JSON.parse(this._errorToJSON(t))),this.send(JSON.stringify({i:e,e:t,_:n?1:void 0}),!0)}},{key:"get",value:function(e){return this._data[e]}},{key:"set",value:function(e,t){return this._data[e]=t,this}},{key:"socket",get:function(){return this._socket},set:function(e){this.bind(e)}},{key:"isConnecting",get:function(){return this._socket&&this._socket.readyState===this._socket.constructor.CONNECTING}},{key:"isConnected",get:function(){return this._socket&&this._socket.readyState===this._socket.constructor.OPEN}}]),t}(n);return s.MAX_SEND_QUEUE_SIZE=10,e.exports=s,e.exports},t[1]=function(e,t){var n=u(2,1).EventEmitter,s=function(){function e(t,r){i(this,e),this._name=t,this._wrapper=r,this._emitter=new n,this._wrappedListeners=new WeakMap}return r(e,[{key:"on",value:function(t,n){return null==this._name&&e.NO_WRAP_EVENTS.indexOf(t)>=0?this._emitter.on(t,n,this):this._emitter.on(t,this._wrapListener(n)),this}},{key:"once",value:function(t,n){return null==this._name&&e.NO_WRAP_EVENTS.indexOf(t)>=0?this._emitter.once(t,n,this):this._emitter.once(t,this._wrapListener(n)),this}},{key:"removeListener",value:function(t,n){return null==this._name&&e.NO_WRAP_EVENTS.indexOf(t)>=0?this._emitter.removeListener(t,n):this._emitter.removeListener(t,this._wrappedListeners.get(n)),this}},{key:"removeAllListeners",value:function(e){return this._emitter.removeAllListeners(e),this}},{key:"eventNames",value:function(){return this._emitter.eventNames()}},{key:"listeners",value:function(t){return null==this._name&&e.NO_WRAP_EVENTS.indexOf(t)>=0?this._emitter.listeners(t):this._emitter.listeners(t).map((function(e){return e._original}))}},{key:"emit",value:function(t){return null==this._name&&e.NO_WRAP_EVENTS.indexOf(t)>=0?this._emitter.emit.apply(this._emitter,arguments):this._wrapper._sendEvent(this._name,t,arguments)}},{key:"timeout",value:function(e){return this._tempTimeout=e,this}},{key:"request",value:function(e){var t=this._wrapper._requestTimeout;void 0!==this._tempTimeout&&(this._wrapper._requestTimeout=this._tempTimeout,delete this._tempTimeout);var n=this._wrapper._sendEvent(this._name,e,arguments,!0);return this._wrapper._requestTimeout=t,n}},{key:"_wrapListener",value:function(e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');var t=this._wrappedListeners.get(e);return t||((t=function(t){var n=this;try{var r=e.apply(this,t.args)}catch(e){throw t.requestId>=0&&this._wrapper._sendReject(t.requestId,e),e}r instanceof Promise?r.then((function(e){t.requestId>=0&&n._wrapper._sendResolve(t.requestId,e)})).catch((function(e){t.requestId>=0&&n._wrapper._sendReject(t.requestId,e)})):t.requestId>=0&&this._wrapper._sendResolve(t.requestId,r)}.bind(this))._original=e,this._wrappedListeners.set(e,t)),t}},{key:"get",value:function(e){return this._wrapper.get(e)}},{key:"set",value:function(e,t){return this._wrapper.set(e,t),this}},{key:"name",get:function(){return this._name},set:function(e){throw new Error("Setting the channel name is not allowed")}}]),e}();return s.prototype.addListener=s.prototype.on,s.prototype.off=s.prototype.removeListener,s.NO_WRAP_EVENTS=["open","message","error","close","disconnect"],e.exports=s,e.exports},t[2]=function(e,t){var n=Object.prototype.hasOwnProperty,r="~";function i(){}function s(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,n,i,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var u=new s(n,i||e,o),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],u]:e._events[c].push(u):(e._events[c]=u,e._eventsCount++),e}function u(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function c(){this._events=new i,this._eventsCount=0}return Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),c.prototype.eventNames=function(){var e,t,i=[];if(0===this._eventsCount)return i;for(t in e=this._events)n.call(e,t)&&i.push(r?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},c.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,o=new Array(s);i<s;i++)o[i]=n[i].fn;return o},c.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},c.prototype.emit=function(e,t,n,i,s,o){var u=r?r+e:e;if(!this._events[u])return!1;var c,a,p=this._events[u],f=arguments.length;if(p.fn){switch(p.once&&this.removeListener(e,p.fn,void 0,!0),f){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,t),!0;case 3:return p.fn.call(p.context,t,n),!0;case 4:return p.fn.call(p.context,t,n,i),!0;case 5:return p.fn.call(p.context,t,n,i,s),!0;case 6:return p.fn.call(p.context,t,n,i,s,o),!0}for(a=1,c=new Array(f-1);a<f;a++)c[a-1]=arguments[a];p.fn.apply(p.context,c)}else{var h,_=p.length;for(a=0;a<_;a++)switch(p[a].once&&this.removeListener(e,p[a].fn,void 0,!0),f){case 1:p[a].fn.call(p[a].context);break;case 2:p[a].fn.call(p[a].context,t);break;case 3:p[a].fn.call(p[a].context,t,n);break;case 4:p[a].fn.call(p[a].context,t,n,i);break;default:if(!c)for(h=1,c=new Array(f-1);h<f;h++)c[h-1]=arguments[h];p[a].fn.apply(p[a].context,c)}}return!0},c.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},c.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},c.prototype.removeListener=function(e,t,n,i){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return u(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||i&&!o.once||n&&o.context!==n||u(this,s);else{for(var c=0,a=[],p=o.length;c<p;c++)(o[c].fn!==t||i&&!o[c].once||n&&o[c].context!==n)&&a.push(o[c]);a.length?this._events[s]=1===a.length?a[0]:a:u(this,s)}return this},c.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&u(this,t)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=r,c.EventEmitter=c,void 0!==e&&(e.exports=c),e.exports},"object"!==(void 0===e?"undefined":n(e)))return u(0);e.exports=u(0)}(),e.exports},"object"!=typeof module)return r(0);module.exports=r(0)}();